<tool id="cmfinder" name="CMFinder_v0" version="0.1.0">
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command>
        <![CDATA[
		tmp_cm_file=\$(mktemp);
		cmfinder 
		
		$gap_threshold_opts.gap_threshold_opts_selector
            #if $gap_threshold_opts.gap_threshold_opts_selector == '--g':
                $gap_threshold_opts.gap
            #end if
		
		-a $input1 $input2 \$tmp_cm_file > $output1
]]>
</command>
    <inputs>
        <param type="data" name="input1" label ="sequence file" format="stk" help="stokholm format" />
        <param type="data" name="input2" label="the initial motif alignment (-a)" format="fasta" help="fasta format" />
        <conditional name="gap_threshold_opts">
            <param name="gap_threshold_opts_selector" type="select" label="Use gap threshold" help="">
                <option value="--g" selected="true">Yes (--g)</option>
                <option value="">No</option>
            </param>
            <when value="--g">
                <param name="gap" type="float" value="1.0" size="5"
                        label="Define the gap threshold to determine the conserved column (--g)" help="">
                    <sanitizer>
                        <valid initial="string.printable">
                            <remove value="&apos;"/>
                        </valid>
                    </sanitizer>
                </param>
            </when>
            <when value=""/>
        </conditional>
    </inputs>
    <outputs>
        <data name="output1" format="stk" label = "output"  />
    </outputs>
    <tests>
        <test>
            <param name="input1" value="model.tree.stk"/>
            <param name="input2" value="cmfinder.fa"/>
            <output name="output1" file="out.stk"/>
        </test>
    </tests>
    <help>
        <![CDATA[

Options:
	-b               Do not use BLAST search to locate anchors
	-v               Verbose. Print running information, and save intermediate results.
	-c <number>      The maximum number of candidates in each sequence. Default 40. No bigger than 100.
	-m <number>      The minimum length of candidates. Default 30
	-M <number>      The maximum length of candidates. Default 100
	-n <number>      The maximum number of output motifs. Default 3
	-f <number>      The fraction of the sequences expected to contain the motif. Default 0.80
	-s <number>      The number of stem-loops in the motif
	-h               Show this list
]]>
    </help>
    <citations>
        <citation type="bibtex">
@misc{githubseqtk,
  author = {LastTODO, FirstTODO},
  year = {TODO},
  title = {seqtk},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/lh3/seqtk},
}</citation>
    </citations>
</tool>
